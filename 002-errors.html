<!DOCTYPE html>
<html lang="en">
  <head>
    <title>d3js - displaying errors</title>
    <link href="css/materialize.min.css" rel="stylesheet">
    <script src="js/materialize.min.js"></script>
    <script src="js/d3.min.js"></script>
    <!-- code highlighting -->
    <link href="css/an-old-hope.css" rel="stylesheet">
    <script src="js/highlight.pack.js"></script>
    <script> hljs.initHighlightingOnLoad();</script>
  </head>

  <body>

    <section>
      <header class="container">
          <h3>Displaying errors</h3>
      </header>
      <div class="container">
        <p>
          Some d3.js functions, such as <code>d3.csv()</code> that we saw in the previous example, can 
          perform error-handling, which we write in the callback function in the <code>catch()</code>
          block, as seen below:
          
        </p>
    </div>
    </section>

    <section>
      <div class="container">
      <pre><code class="javascript">
  d3.csv('data/countries_of_the_world_error.csv')
    .then( (data) => {

    })
    .catch( (error) => {
      d3.select('#error-list').style('display','block')
      let error_list = d3.select('#error-list')
                         .select('ul')
                         .append('li').attr('class','grey-text text-darken-1')
      error_list.html('Error on loading csv file: ' + error)
    })
      </code></pre>
      </div>
    </section>

    <section>
      <div class="container">
        <p>
          A missing resource, e.g. file not foun or error fetching JSON data, is probably 
          the most common error, which is exactly what we have in the code above
          (the filename is incorrect). 
        
          In each example on this site, any error will be displayed like so
        </p>
    </div>
    </section>

    <section style='display:none;' id='error-list'>
      <div class="container">
      <div class='card-panel red lighten-4 grey-text'>
        <ul>
        <li><h5 class='red-text text-darken-3'>Errors:</h5>
        </ul>
      </div>
      </div>
    </section>

    <section>
      <div class="container">
      <p>
      which was generated by the following html, coupled with the error handling in the code shown above. 
      </p>
    </section>

    <section>
      <div class="container">
      <pre><code class="html">
&ltsection style='display:none;' id='error-list'>
  &ltdiv class='card-panel red lighten-4 grey-text'>
    &ltul>
    &ltli>&lth5 class='red-text text-darken-3'>Errors:&lth5>
    &ltul>
  &ltdiv>
&lt/section>
      </code></pre>
      </div>
    </section>

    <section>
      <div class="container" id='main-text'>
      </div>
    </section>


    <script type='text/javascript'>
      d3.csv('data/countries_of_the_world_error.csv')
        .then( (data) => {

        })
        .catch( (error) => {
          d3.select('#error-list').style('display','block')
          let error_list = d3.select('#error-list')
                             .select('ul')
                             .append('li').attr('class','grey-text text-darken-1')
          error_list.html('Error on loading csv file: ' + error)
        })
    </script>
  </body>
</html>
